
**学习导航**

1. **课程与考试概览**：了解考试结构和重点。
    
2. **核心考点详解**：
    
    - PV 操作与进程同步（老师提及，但STT开头缺失，我会补充核心内容）
        
    - 进程调度与作业调度（混合调度问题）
        
    - 内存地址转换（逻辑地址到物理地址）
        
    - 页面置换算法
        
    - 银行家算法（死锁避免）
        
3. **其他重要知识点串讲**（简答题覆盖范围）：
    
    - 操作系统引论
        
    - 进程管理（概念、状态、PV操作在简答题中的应用）
        
    - 死锁（概念、条件、处理）
        
    - 内存管理（分区、分页、分段、TLB、抖动）
        
    - I/O 系统
        
    - 文件管理
        
4. **补充习题解析思路**
    
5. **学习建议与提醒**
    

---

**1. 课程与考试概览**

老师提到了这次考试的一些重要信息，我们先总结一下：

- **试卷结构**：A卷和B卷。如果你这次没过，补考会考你上次没考到的那部分内容（比如算法）。
    
- **大题分值**：
    
    - **调度问题**：2个题，每个15分，共30分。
        
    - **PV操作**：（STT开头缺失，但老师提到“一开始是PV操作的”，并且在简答题部分说PV操作考了大题，因此这也是一个15分的大题，两个卷子加起来也可能是30分）。我们假设这也是两个题，每个15分，共30分。
        
        - _推测：_ 如果PV操作和调度是分开的，那么这两块加起来就是60分。老师说“这两个点...等于60分”，可能指的就是PV操作和调度。
            
    - **地址转换**：1个题，10分。
        
    - **页面置换**：2个题（A/B卷各一个，题目页面引用串一样，算法不同），每个10分（老师提到“AB卷都有那个页面...这一题是...十分”但前面又说“这个也是十分...基本上这是这前面的这个五个题，60分”，如果调度30，PV操作30，地址转换10，那么页面置换和银行家算法可能是各10分，凑成80分的大题。但后面又说“银行大算法这个也是也是十分，基本上这是这前面的这个五个题，60分”，这里有点矛盾。我们暂且认为页面置换和银行家算法各10分，这样大题总分可能是 30 (调度) + 30 (PV) + 10 (地址转换) + 10 (页面置换) + 10 (银行家) = 90分，或者调度和PV操作各占15分，地址转换10分，页面置换10分，银行家10分，总共55或类似。但老师明确说了“这两个点...等于60分”，我们就按PV操作和调度各30分（每卷15分）来理解。然后地址转换10分，页面置换10分，银行家算法10分。这样主要题目是 30+10+10+10 = 60分。加上简答题凑够总分。 **老师后面明确说 “这前面的这个五个题，60分”，然后又提到PV操作和调度是“两个点，等于60分”，这应该是笔误或者口误。比较合理的解释是：PV操作15分，调度15分，地址转换10分，页面置换10分，银行家算法10分。这样一共是5个大题，总计60分。** (A/B卷，所以学生实际做的是其中一部分，但复习要全覆盖)。
        
    - **银行家算法**：1个题，10分。
        
- **大题总分（预估）**：至少60分。
    
- **简答题**：覆盖1-7章，共8个简答题（A/B卷合起来），第5章考两个。
    
- **签到/作业**：平时作业要交，补交会扣分。
    

---

**2. 核心考点详解**

老师点名了几个会出大题的重点，这些是你务必啃下来的骨头！

**考点一：PV 操作与进程同步（_老师口述开头部分缺失，根据后续提及和学生提问补充核心内容_）**

虽然录音开头缺失了PV操作的讲解，但老师和同学都确认了这是重点，并且会考大题。PV操作是解决进程同步与互斥问题的核心工具。

- **核心概念**：
    
    - **临界资源 (Critical Resource)**：一次仅允许一个进程使用的资源（如打印机、共享变量）。
        
    - **临界区 (Critical Section)**：进程中访问临界资源的那段代码。
        
    - **信号量 (Semaphore)**：一个特殊的整型变量，用于控制对共享资源的访问。只能通过P操作和V操作来访问。
        
        - `S > 0`：表示可用资源的数量。
            
        - `S = 0`：表示无可用资源，但无进程等待。
            
        - `S < 0`：其绝对值表示等待该资源的进程数量。
            
    - **P操作 (wait/acquire)**：
        
        1. `S = S - 1`
            
        2. 如果 `S < 0`，则调用P操作的进程阻塞，并加入该信号量的等待队列。
            
        3. 如果 `S >= 0`，则进程继续执行。
            
    - **V操作 (signal/release)**：
        
        1. `S = S + 1`
            
        2. 如果 `S <= 0`，则从该信号量的等待队列中唤醒一个进程。
            
        3. 进程继续执行（发出V操作的进程和被唤醒的进程哪个先执行，取决于系统）。
            
- **PV操作的应用**：
    
    1. **实现互斥 (Mutual Exclusion)**：保护临界区，确保同一时间只有一个进程能进入。
        
        - 设置一个互斥信号量 `mutex`，初值为1。
            
        
        ```
        P(mutex);       // 进入临界区前
        // 临界区代码
        V(mutex);       // 退出临界区后
        ```
        
    2. **实现同步 (Synchronization)**：协调多个进程的执行顺序，一个进程等待另一个进程完成某事。
        
        - 例如，进程A必须在进程B完成后才能执行某操作。设置同步信号量 `sync`，初值为0。
            
        - 进程B完成操作后：`V(sync)`
            
        - 进程A等待处：`P(sync)`
            
- **经典问题举例**：
    
    - **生产者-消费者问题**：一组生产者进程生产产品放入缓冲区，一组消费者进程从缓冲区取出产品消费。
        
        - 需要信号量：`mutex` (缓冲区互斥访问，初值1)，`empty` (空闲缓冲区数量，初值N)，`full` (产品数量，初值0)。
            
    - **读者-写者问题**：允许多个读者同时读，但写者必须互斥访问，且读写不能同时进行。
        
    - **哲学家进餐问题**：五个哲学家围桌而坐，每人面前一碗饭，每两位哲学家之间一根筷子。哲学家饿了就想拿起左右两边的筷子吃饭。
        
    - **独木桥问题**（老师补充习题中提到）：
        
        - **问题描述**：一座桥每次只能单向通行，且有载重限制。
            
        - **分析**：
            
            - 方向互斥：不能同时双向都有人。
                
            - 同向通行：同一方向可以连续过人。
                
            - 载重限制：桥上人数不能超过N。
                
        - **可能的信号量设置**：
            
            - `bridge_access` (控制桥的访问权，实现方向切换时的互斥，初值1)
                
            - `count_direction_A` (A方向上桥人数)
                
            - `count_direction_B` (B方向上桥人数)
                
            - `max_load_A` (A方向最大载重，初值N)
                
            - `max_load_B` (B方向最大载重，初值N)
                
            - `mutex_count_A`, `mutex_count_B` (保护计数器)
                
            - 还需要更复杂的逻辑来处理方向优先、饥饿等问题。考试中可能会简化，比如只考虑一个方向或基本互斥与计数。
                
- **考试要点**：
    
    - 理解P、V操作的原子性（不可中断）。
        
    - 能根据问题描述，正确设置信号量及其初值。
        
    - 能写出使用PV操作解决同步互斥问题的伪代码。
        
    - 分析过程很重要，即使答案略有偏差，过程正确也能得分。
        

**考点二：进程调度与作业调度（混合调度问题） - 15分/题，共2个题**

老师强调了这是一个大头，15分一个，A/B卷各有一个，总共30分。核心是“混合调度”，即作业调度和进程调度（CPU调度）同时存在，并采用不同的算法。

- **两级调度**：
    
    1. **作业调度 (高级调度)**：
        
        - **作用**：从外存的后备作业队列中挑选作业调入内存，为其分配必要的资源，并建立进程。
            
        - **目标**：控制进入内存的作业数量，即“多道程序度”。老师强调“跟多道程序的道数相关联。两道的程序最多能进行两个，三道的最多能进取三个，多余的就得在外存上等着”。
            
        - **常用算法**：
            
            - **先来先服务 (FCFS)**：按作业到达的先后顺序调度。
                
            - **短作业优先 (SJF)**：选择估计运行时间最短的作业优先调度。
                
            - **优先权调度算法 (PSA)**：为作业设定优先权，选择优先权最高的作业。
                
            - **高响应比优先 (HRRN)**：响应比 $R_p = \frac{W+S}{S} = 1 + \frac{W}{S}$ (其中 $W$ 为等待时间，$S$ 为估计运行时间)。选择响应比最高的作业。
                
    2. **进程调度 (低级调度/CPU调度)**：
        
        - **作用**：从内存的就绪队列中选择一个进程，把CPU的使用权分配给它。
            
        - **目标**：高效利用CPU，减少进程等待时间。
            
        - **方式**：
            
            - **非抢占式 (Non-preemptive)**：一旦CPU分配给某进程，该进程会一直执行下去，直到完成或因I/O阻塞。
                
            - **抢占式 (Preemptive)**：当前进程正在执行时，可以被更高优先级的进程或其他规则中断，CPU被抢走。老师强调“我们考得到两个题都是强调式的...都是抢占式的”。
                
        - **常用算法**：
            
            - **先来先服务 (FCFS)** (通常非抢占)
                
            - **短作业/进程优先 (SJF/SPF)**：可以是抢占式的（**最短剩余时间优先 - SRTF**，老师提到“进到内存里面的，我们是采用剩余时间最短的这个比较的”）或非抢占式的。
                
            - **优先权调度算法 (PSA)**：可以是抢占式或非抢占式。老师提醒注意“小优先数是高优先权还是大优先数是高优先权”。通常题目会说明，如未说明，一般是数值越小，优先级越高。
                
            - **时间片轮转 (Round Robin - RR)**：老师口误说成“农专岗”，这是RR。每个进程分配一个时间片，时间片用完即被剥夺CPU，放到就绪队列尾部。
                
            - **高响应比优先 (HRRN)** (通常用于作业调度，但思想也可借鉴)
                
- **混合调度的解题步骤**：
    
    1. **明确当前层面**：分清楚是“作业要进内存”（作业调度）还是“进程要进CPU”（进程调度）。
        
    2. **作业调度阶段**：
        
        - 关注“多道程序度”。内存中最多能同时容纳几个作业。
            
        - 根据题目给定的作业调度算法（如FCFS, SJF），从后备队列选择作业进入内存。
            
        - 记录作业进入内存的时间。
            
    3. **进程调度阶段**：
        
        - 一旦作业进入内存变为进程，就参与CPU竞争。
            
        - 根据题目给定的进程调度算法（老师强调考的是抢占式，如SRTF、抢占式优先权），在就绪队列中选择进程上CPU。
            
        - **抢占规则**：
            
            - 新进程到达就绪队列时，若其优先级/剩余时间等优于当前CPU上执行的进程，则发生抢占。
                
            - CPU上执行的进程完成一个I/O操作后返回就绪队列时，也可能触发调度和抢占。
                
            - 时间片用完（RR算法）。
                
    4. **计算关键指标**：
        
        - **周转时间 (Turnaround Time, $T_i$)**：作业从提交给系统开始，到作业完成为止所花费的时间。  
            $T_i = \text{完成时间}_i - \text{提交时间}_i$  
            老师强调：“从外存上排队的时间，内存里排队的时间以及CPU里面运行的时间，这三块时间都是它的周转时间。”
            
        - **平均周转时间 ($\bar{T}$)**：$\bar{T} = \frac{\sum T_i}{N}$ (N为作业个数)
            
        - **带权周转时间 (Weighted Turnaround Time, $W_i$)**：周转时间与CPU实际运行时间的比值。  
            $W_i = \frac{T_i}{S_i}$ ( $S_i$ 为作业实际使用CPU的时间)  
            老师强调：“是一个大于等于一的一个比值...没有单位，它只是一个比值。”不要画蛇添足写单位。
            
        - **平均带权周转时间 ($\bar{W}$)**：$\bar{W} = \frac{\sum W_i}{N}$
            
- **例题框架 (假设)**：
    
    - 多道程序度为2。
        
    - 作业调度算法：FCFS。
        
    - 进程调度算法：抢占式短剩余时间优先 (SRTF)。
        
    - 作业信息：到达时间、预计运行时间。
        
        
    
    ```mermaid
    gantt
        dateFormat  HH:mm:ss
        title 混合调度示例 (假设数据)
        axisFormat %H:%M:%S
        section 作业进入内存 (FCFS, 多道程序度2)
        作业A进入 :ja_in, 00:00:00, 0s
        作业B进入 :jb_in, 00:00:05, 0s
        作业C进入 :jc_in, 00:00:20, 0s
        section CPU执行 (SRTF抢占式)
        作业A执行 :crit, ja_cpu1, 00:00:00, 10s
        作业B执行 :crit, jb_cpu1, 00:00:10, 5s
        作业A执行 :crit, ja_cpu2, 00:00:15, 5s  
        作业C执行 :crit, jc_cpu1, 00:00:20, 15s
        作业B执行 :crit, jb_cpu2, 00:00:35, 8s 
    ```
    
    _注意：上面的Mermaid甘特图只是一个示意，实际执行顺序需要根据SRTF规则和作业到达内存的时间仔细推算。_
    
- **老师提醒**：
    
    - 有一个题是原题或数字变化。务必复习作业和课上例子。
        
    - 看清是抢占还是非抢占。考试考的是抢占。
        
    - 注意优先权大小的定义。
        

**考点三：逻辑地址到物理地址的转换 (Address Translation) - 10分**

这个题目10分，需要转换4个逻辑地址，会包含正常、缺页、越界等情况。

- **核心概念**：
    
    - **逻辑地址 (Logical Address)**：CPU生成的地址，也称虚拟地址。
        
    - **物理地址 (Physical Address)**：内存单元的实际地址。
        
    - **页 (Page)**：进程的逻辑地址空间被划分为固定大小的块。
        
    - **页框/物理块 (Page Frame/Physical Block)**：内存的物理地址空间被划分为与页同样大小的块。老师提到“页和块是严格的大小肯定是一样的”。
        
    - **页表 (Page Table)**：实现从页号到页框号映射的表。每个进程都有一个页表。
        
    - **请求分页 (Demand Paging)**：老师强调“我们考的是请求分页”。即页面只在需要时才调入内存。
        
    - **段 (Segment)**：逻辑地址空间按逻辑意义划分的段（如代码段、数据段）。（老师提到分段不怎么用，考试重点是请求分页）。
        
- **地址转换过程（请求分页）**：
    
    1. **逻辑地址结构**：逻辑地址分为 **页号 (P)** 和 **页内偏移 (d)**。
        
        - **如何划分？** 看页面大小。
            
            - 页面大小 $L$ (如1K, 2K, 4K)。偏移量占 $\log_2 L$ 位。
                
            - 老师举例：1K ($2^{10}$B) $\rightarrow$ 10位页内偏移；2K ($2^{11}$B) $\rightarrow$ 11位页内偏移 (这是考试用的)；4K ($2^{12}$B) $\rightarrow$ 12位页内偏移。
                
        - **十进制逻辑地址转换**：
            
            - 页号 $P = \lfloor \frac{\text{逻辑地址}}{\text{页面大小}} \rfloor$ (整除，取整部分)
                
            - 页内偏移 $d = \text{逻辑地址} \pmod{\text{页面大小}}$ (取余部分)
                
        - **二/十六进制逻辑地址转换**：
            
            - 低 $\log_2 L$ 位为页内偏移 $d$。
                
            - 高位部分为页号 $P$。
                
    2. **查页表**：
        
        - 用页号 $P$ 去查找当前进程的页表。
            
        - 页表项通常包含：页框号、存在位(有效位)、访问位、修改位、保护位等。
            
    3. **形成物理地址**：
        
        - **情况一：正常转换 (页在内存)**
            
            - 页表项的存在位为1。
                
            - 从页表项中读出该页对应的物理块号（页框号）$P'$。
                
            - 物理地址 = 物理块号 $P'$ * 页面大小 + 页内偏移 $d$ (或者直接拼接 $P'$ 和 $d$)。
                
        - **情况二：缺页中断 (Page Fault)**
            
            - 页表项的存在位为0，表示该页不在内存。
                
            - 产生缺页中断。操作系统介入，从外存调入所需页面到内存空闲块。若无空闲块，则执行页面置换算法。修改页表，然后重新执行该指令。
                
            - 题目中，如果发生缺页，一般会问是什么情况，可能不需要你给出最终物理地址，或者会告诉你调入哪个块。
                
        - **情况三：越界错误 (Addressing Error/Protection Fault)**
            
            - 页号 $P$ 超出了页表长度（逻辑地址不合法）。
                
            - 或者，访问权限不足（如试图写只读页面）。
                
            - 产生中断，操作系统处理。
                
- **输入地址格式**：
    
    - **十进制**：默认。
        
    - **十六进制**：带大写H (e.g., 123AH)。
        
    - **二进制**：一串01。
        
- **例题示意图** (假设页面大小2KB = 2048B, 页号占高位，页内偏移占低11位)
    
    ```mermaid
    graph TD
        A["逻辑地址 (例如 5000D)"] --> B{"页面大小 2KB (2048B)"};
        B --> C["页号 P = floor(5000 / 2048) = 2"];
        B --> D["页内偏移 d = 5000 mod 2048 = 904"];
        C --> E{"查页表: 页表项[2]"};
        E -- "存在位=1, 页框号=F (例如 5)" --> F["物理地址 = 页框号 F * 2048 + d = 5 * 2048 + 904 = 10240 + 904 = 11144"];
        E -- "存在位=0" --> G["缺页中断"];
        C -- "页号P越界 (如P > 页表最大页号)" --> H["地址越界错误"];
    ```
    
- **老师提醒**：
    
    - 考试页面大小是2K，所以页内偏移是11位。
        
    - 看清楚给的逻辑地址是什么进制。
        
    - 准确区分缺页和越界。
        

**考点四：页面置换算法 (Page Replacement Algorithms) - 10分/题，共2个题**

A/B卷各一个题，页面引用串一样，但要求的算法不同。内存块是5个（书上例子是3个）。

- **核心概念**：当发生缺页中断，且内存中没有空闲页框时，需要选择一个已在内存中的页面将其换出，以便腾出空间给要调入的页面。
    
- **要掌握的算法**：
    
    1. **最佳置换算法 (OPT/Optimal)**：
        
        - **思想**：选择未来最长时间内不会被访问的页面进行置换。
            
        - **实现**：向后查看页面引用串。这是一种理想算法，无法实际实现，但可作为评价其他算法的标准。
            
        - **老师提醒**：如果未来有多个页面都不再使用，则优先置换“先进来的”那个。
            
    2. **先进先出算法 (FIFO)**：
        
        - **思想**：选择在内存中驻留时间最长的页面进行置换（最早进入内存的页面）。
            
        - **实现**：维护一个页面进入内存的队列。
            
        - **注意**：可能产生Belady异常（分配的物理块数增加，缺页次数反而增加）。
            
    3. **最近最久未使用算法 (LRU - Least Recently Used)**：
        
        - **思想**：选择过去最长时间内未被访问的页面进行置换。基于局部性原理，认为最近没用的，将来可能也不太会用。
            
        - **实现**：需要记录页面使用情况。可以为每个页面设置一个访问时间戳，或维护一个按访问时间排序的栈/队列。
            
        - **老师提醒**：LRU是“眼睛向前面扫描，刚用过的就先留着，把最久没用的那个换掉”。
            
    4. **其他可能涉及 (虽然老师主要点了前三个)**：
        
        - **最不常用算法 (LFU - Least Frequently Used)**：选择访问次数最少的页面。
            
        - **简单时钟算法 (Clock/NRU - Not Recently Used)**：FIFO的改进，考虑了使用位。
            
- **解题步骤**：
    
    1. 给定：物理块数（本题为5），页面引用串。
        
    2. 初始化：内存块为空。
        
    3. 逐个处理页面引用串中的页面：
        
        - **若页面已在内存中**：命中，不发生缺页，不置换。若是LRU，需更新其“最近使用”状态。
            
        - **若页面不在内存中且有空闲物理块**：缺页，将页面调入空闲块。
            
        - **若页面不在内存中且无空闲物理块**：缺页，根据指定的置换算法选择一个牺牲页，将其换出，新页面换入。
            
    4. 记录**缺页次数 (Page Fault Number)** 和/或 **置换次数 (Replacement Number)**。
        
        - **缺页次数**：只要页面不在内存，需要调入，就算一次缺页（包括最初调入填满空闲块的情况）。
            
        - **置换次数**：只有在内存已满，需要换出一个页面才能调入新页面时，才算一次置换。因此，置换次数 <= 缺页次数。
            
        - **老师提醒**：“看清楚，我们一个考的是page fault number，一个是replacement number，是不一样的”。
            
- **示例表格法** (假设3个物理块, 引用串: 7,0,1,2,0,3,0,4,2,3,0,3,2,1,2,0,1,7,0,1)
    
    |引用页|块1|块2|块3|换出页|缺页?|
    |:-:|:-:|:-:|:-:|:-:|:-:|
    |7|7|||-|是|
    |0|7|0||-|是|
    |1|7|0|1|-|是|
    |2|2|0|1|7 (FIFO)|是|
    |0|2|0|1|-|否|
    |3|2|3|1|0 (FIFO)|是|
    |...|...|...|...|...|...|
    
    你需要为每个算法画这样的过程表。
    

**考点五：银行家算法 (Banker's Algorithm) - 10分**

用于避免死锁。核心是判断资源分配后系统是否处于**安全状态**。

- **核心概念**：
    
    - **安全状态**：系统能按某种顺序（安全序列）为每个进程分配其所需资源，直至最大需求，从而使所有进程都能顺利完成。
        
    - **不安全状态**：不一定导致死锁，但系统无法保证所有进程都能完成。
        
- **数据结构**：
    
    - **Available**: 向量，表示系统中每类资源的可用实例数。
        
    - **Max**: 矩阵，表示每个进程对每类资源的最大需求量。
        
    - **Allocation**: 矩阵，表示已分配给每个进程的每类资源实例数。
        
    - **Need**: 矩阵，表示每个进程还需要的每类资源量。`Need[i,j] = Max[i,j] - Allocation[i,j]`。
        
- **算法步骤**：
    
    1. **请求检查**：当进程 $P_i$ 发出资源请求 `Request_i`：
        
        - 若 `Request_i[j] <= Need[i,j]` 对所有资源类型 `j` 成立，则转向步骤2。否则，出错（请求超过声明的最大需求）。
            
        - 若 `Request_i[j] <= Available[j]` 对所有资源类型 `j` 成立，则转向步骤3。否则，$P_i$ 必须等待（资源不足）。
            
    2. **尝试分配**：系统假定把资源分配给 $P_i$：
        
        - `Available = Available - Request_i`
            
        - `Allocation[i] = Allocation[i] + Request_i`
            
        - `Need[i] = Need[i] - Request_i`
            
    3. **安全性检查**（核心）：
        
        - 初始化：`Work = Available`；`Finish[k] = false` 对所有进程 $P_k$。
            
        - 循环查找：是否存在一个进程 $P_k$ 满足：
            
            - `Finish[k] == false`
                
            - `Need[k,j] <= Work[j]` 对所有资源类型 `j`
                
        - 若找到这样的 $P_k$：
            
            - `Work = Work + Allocation[k]` (假定 $P_k$ 执行完并释放资源)
                
            - `Finish[k] = true`
                
            - 返回循环查找。
                
        - 若找不到这样的 $P_k$：
            
            - 如果所有进程的 `Finish[k]` 都为 `true`，则系统处于安全状态，本次分配可以执行。
                
            - 否则，系统将进入不安全状态，本次分配不能执行，需撤销假定分配（恢复Available, Allocation, Need），$P_i$ 等待。
                
- **考试形式**：
    
    - 给出现有资源总量、各进程已分配资源、各进程最大需求。
        
    - 判断当前系统是否安全（即找安全序列）。
        
    - 某个进程发出资源请求，判断是否能分配。
        
    - 老师提到：“一个题是四种资源，一个题是资源多一点，是五个资源”。
        
- **老师提醒**：按照书上的步骤来判断。
    

---

**3. 其他重要知识点串讲（简答题覆盖范围）**

这些内容主要对应简答题。

**第一章：操作系统引论**

- **什么是操作系统？** (定义)
    
- **操作系统的功能**：处理器管理、存储器管理、设备管理、文件管理、用户接口。
    
- **操作系统的角色**：计算机资源的管理者，用户与计算机硬件之间的接口。
    
- **操作系统的分类**：
    
    - 批处理系统 (Batch Processing)
        
    - 分时系统 (Time-sharing)
        
    - 实时系统 (Real-time)
        
    - 分布式系统 (Distributed)
        
    - 并行系统 (Parallel)
        
    - 嵌入式系统 (Embedded)
        
    - （老师提到“传感网的”，了解即可）
        
- **多道程序设计 (Multiprogramming)**：内存中同时存放多个作业，宏观上并行，微观上串行。与调度部分的“多道程序度”关联。
    
- **操作系统接口**：
    
    - 命令接口 (CLI)
        
    - 图形用户接口 (GUI)
        
    - 程序接口 (API，系统调用 System Calls)
        

**第二章：进程管理**

- **进程 (Process)**：
    
    - **概念**：程序的一次执行过程；是系统进行资源分配和调度的独立单位。
        
    - **组成**：程序段、数据段、进程控制块 (PCB)。
        
- **进程状态与转换**：
    
    - **三态模型**：运行态、就绪态、阻塞态（等待态）。
        
    - **五态模型**：新建态、就绪态、运行态、阻塞态、终止态。
        
    - **七态模型**：在五态基础上增加挂起就绪、挂起阻塞。（老师说上一届考过，这次重点放三态或五态）。
        
    - 画出状态转换图，并说明转换原因。
        
    
    ```mermaid
    stateDiagram-v2
        [*] --> New: 创建
        New --> Ready: 准入
        Ready --> Running: 调度
        Running --> Ready: 时间片完 / 抢占
        Running --> Blocked: I/O请求 / 等待事件
        Blocked --> Ready: I/O完成 / 事件发生
        Running --> Terminated: 执行完毕 / 出错
        note left of Blocked : 也称等待态
    ```
    
- **PV操作**：除了大题，简答题也可能考其概念或简单应用。
    
- **临界资源 (Critical Resource)**：一次只允许一个进程访问的资源。
    
- **临界区 (Critical Section)**：进程中访问临界资源的那段代码。
    

**第三章：进程调度与死锁**

- **调度**：大题已覆盖。简答题可能考概念或特定算法的特点。
    
- **死锁 (Deadlock)**：多个进程因互相等待对方持有的资源而都无法继续执行的现象。**（每年必考重点）**
    
    - **死锁产生的必要条件 (Necessary Conditions)** (四个务必背熟，中英文)：
        
        1. **互斥 (Mutual Exclusion)**：资源同一时刻只能被一个进程使用。
            
        2. **占有并等待 (Hold and Wait)**：进程已占有至少一个资源，又请求新资源，且该资源被其他进程占有，此时请求进程阻塞，但不释放已占有资源。
            
        3. **不可剥夺/非抢占 (No Preemption)**：资源只能由占有它的进程主动释放，不能被强行剥夺。
            
        4. **循环等待 (Circular Wait)**：存在一个进程资源的循环等待链。
            
    - **死锁产生的原因 (Reason)**：
        
        1. 资源分配不足。
            
        2. 进程推进顺序不当 (不合法)。
            
    - **死锁处理方法 (Deadlock Handling)** (四种)：
        
        1. **鸵鸟策略/忽略 (Ostrich Algorithm/Ignore)**：不理睬。
            
        2. **死锁预防 (Deadlock Prevention)**：破坏四个必要条件之一。
            
        3. **死锁避免 (Deadlock Avoidance)**：如银行家算法，在分配资源前判断是否会导致不安全状态。
            
        4. **死锁检测与解除 (Deadlock Detection and Recovery)**：允许死锁发生，定时检测，然后解除（剥夺资源、撤销进程等）。
            

**第四、五章：内存管理**

这两章考了三个题（一个地址转换大题，两个简答题）。

- **早期内存分配** (第四章)：
    
    - 连续分配：单一连续区、固定分区、可变分区（动态分区）。
        
    - 可变分区的分配算法：首次适应、最佳适应、最差适应。
        
- **虚拟存储技术 (Virtual Memory)** (第五章)：
    
    - **基本思想**：程序部分装入内存即可运行，其余部分需要时再调入。实现“逻辑上扩充内存”。基于局部性原理。
        
    - **请求分页 (Demand Paging)**：核心，大题已考。
        
    - **请求分段 (Demand Segmentation)**：（老师说“淘汰了，不再用了”）。
        
    - **页与段的区别 (Paging vs. Segmentation)**：（这是一个重要的简答题考点）
        
        1. **基本单位**：页是物理单位，大小固定，对用户透明；段是逻辑单位，大小可变，由用户定义（如代码段、数据段）。
            
        2. **地址空间维度**：页式是一维地址空间；段式是二维地址空间（段号+段内地址）。
            
        3. **信息共享与保护**：段更易于实现按逻辑模块的共享和保护。
            
        4. **内存利用率**：页式内存利用率高（只有最后一个页有内部碎片，平均半页）。段式易产生外部碎片。
            
        5. **动态链接/增长**：段式更方便。
            
    - **快表 (TLB - Translation Lookaside Buffer)**：（老师强调了，会考简答题）
        
        - **是什么？** 一种特殊的高速缓存，存放最近访问过的页表项。也叫“旁路转换缓冲”或“联想寄存器”。
            
        - **为什么引入？** 常规页式地址转换需要访问两次内存（一次查页表，一次取数据/指令），效率低。TLB利用了局部性原理。
            
        - **工作过程**：
            
            1. CPU给出逻辑地址，硬件先将其页号与TLB中所有页表项的页号并行比较。
                
            2. **命中 (Hit)**：TLB中有该页号，直接从中取出物理块号，形成物理地址。访问一次TLB+一次内存。
                
            3. **未命中 (Miss)**：TLB中没有，再去内存中查页表。找到后，将页表项存入TLB (可能替换旧的)，再形成物理地址。访问一次TLB+一次内存(查页表)+一次内存(取数据)。
                
        - **性能计算**：设TLB命中率 $h$，访问TLB时间 $t_{TLB}$，访问内存时间 $t_{mem}$。  
            有效访存时间 $EAT = h \times (t_{TLB} + t_{mem}) + (1-h) \times (t_{TLB} + t_{mem} + t_{mem})$  
            (简化：若TLB访问时间远小于内存访问时间，可视为 $EAT = h \times t_{mem} + (1-h) \times 2t_{mem}$，若一次访问TLB和一次访问内存算一次，则 $EAT = h \times (t_{TLB} + t_{mem}) + (1-h) \times (t_{TLB} + 2t_{mem})$。老师的例子：TLB 2ns，内存 10ns，命中率90% $\rightarrow 0.9 \times (2+10) + 0.1 \times (2+10+10) = 0.9 \times 12 + 0.1 \times 22 = 10.8 + 2.2 = 13ns$。而原来是20ns。所以快了很多。)
            
    - **抖动/颠簸 (Thrashing)**：（这也是一个重要的简答题考点）
        
        - **现象**：页面在内存与外存之间频繁换入换出，导致系统花费大量时间在页面调度上，CPU利用率急剧下降甚至系统崩溃。
            
        - **原因**：
            
            1. 分配给进程的物理块太少 (Frame allocation too small)，无法容纳其工作集。
                
            2. 页面置换算法不当 (Page replacement algorithm not optimal)。
                
        - **如何避免/解决**：
            
            1. 采用**工作集 (Working Set)** 模型：为进程分配合适数量的物理块，使其工作集内的页面都能驻留内存。
                
            2. 采用**缺页率 (Page Fault Frequency - PFF)** 控制：监控缺页率，过高则增加分配的物理块，过低则减少。
                
            3. 选择合适的页面置换算法（如LRU优于FIFO）。
                
            4. 暂停部分进程，减少对内存的竞争。
                

**第六章：I/O 系统**

- **I/O 控制方式**：
    
    1. **程序直接控制方式 (Polling)**：CPU轮询。
        
    2. **中断驱动方式 (Interrupt-driven)**：设备完成操作后通过中断通知CPU。
        
    3. **DMA方式 (Direct Memory Access)**：数据传输由DMA控制器完成，CPU只需在开始和结束时介入。
        
    4. **通道方式 (Channel)**：更进一步，有专门的通道处理器处理I/O指令。
        
- **设备独立性 (Device Independence)** / 设备无关性：
    
    - **概念**：应用程序使用逻辑设备名与设备交互，操作系统负责将逻辑设备映射到物理设备。用户程序不依赖于具体物理设备。
        
    - **好处**：易于更换设备、提高程序可移植性、设备分配更灵活。
        
- **SPOOLing 技术 (Simultaneous Peripheral Operation On-Line)**：
    
    - **概念**：利用磁盘作为高速缓存，将低速I/O设备上的数据先存入磁盘（输入井），或将要输出到低速设备的数据先存入磁盘（输出井），模拟脱机输入输出。
        
    - **作用**：缓和CPU与低速设备的速度矛盾，实现外设的并行操作，提高I/O效率和CPU利用率。
        
    - （老师说“上年刚考过”，可能这次不会是重点，但基本概念要知道。）
        

**第七章：文件管理** (第八章物理结构老师说没考)

- **文件的逻辑结构 (Logical Structure)**：
    
    1. **流式文件 (Stream File)**：无结构，一系列字节流。
        
    2. **记录式文件 (Record File)**：由定长或变长记录组成。
        
    
    - 老师提到的“顺序的、索引的、索引顺序的”可能是指文件的存取方法或组织方式，与逻辑结构和物理结构都有关。
        
        - **顺序文件**：记录按某种顺序排列。
            
        - **索引文件**：为文件建立索引表，通过索引查找记录。
            
        - **索引顺序文件**：顺序存储，但有索引，结合了两者的优点。
            
- **文件的物理结构 (Physical Structure / Allocation Method)**：文件在外存上的存放方式。
    
    - （老师说上学期考过：连续分配、链接分配、索引分配。这次可能不重点考）
        
- **文件目录结构 (Directory Structure)**：
    
    1. **单级目录**
        
    2. **二级目录**
        
    3. **树形目录 (多级目录)**：现代操作系统常用，易于文件管理和实现访问控制。
        
    
    - （老师说“按名存取”是树形目录的重要优点）
        
- **磁盘调度算法**：（老师说课程设计用，考试没关系）
    

**第八章：磁盘存储器管理**  
老师明确说第八章没有考题。

---

**4. 补充习题解析思路**

老师课后提到了几道补充题，这里简要说下思路：

1. **奇偶数过桥/单向桥问题 (PV操作)**：
    
    - 核心是互斥（桥某一时刻只能一个方向用）和同步（一个方向走完，另一个方向才能开始），可能还有计数（限制桥上人数）。
        
    - 需要设置信号量控制方向、人数。例如，`mutex_bridge` (桥的互斥, 初值1)，`count_A` (A方向人数), `count_B` (B方向人数), `mutex_count_A`, `mutex_count_B`, `allow_A_to_cross` (初值1或0, 视情况), `allow_B_to_cross` (初值0或1)。
        
    - 老师提到的“独木桥”和“男女生过桥”类似，都要考虑方向互斥和同向时允许多人但不能超载。
        
    - **分析过程很重要**，写出你如何设置信号量，每个信号量的含义和初值，以及PV操作的逻辑。
        
2. **单道抢占系统调度**：
    
    - 老师强调：“单道你想抢占系统和非抢占系统是一模一样的，因为只有一个道，它进去了，其他人都进不来，那一层更没资格抢占”。所以，单道环境下，即使题目说“抢占”，也按非抢占处理，因为没有其他进程在内存里和你抢。
        
3. **时间片轮转**：
    
    - “没有告诉你时间片是多大，所以两个进程或者是两个中转的时候，一半一半就好了。如果是三个垄断的话，每个人的1/3的这样去做”。这指在无法明确时间片大小时，可以理解为均分CPU时间或者认为时间片足够小以至于宏观上是并行。
        
4. **地址转换（段式、页式）**：
    
    - 前面大题已详细讲解。请求页式是重点。
        
5. **页面置换算法（画图/列表）**：
    
    - 大题已详细讲解。注意FIFO可能出现的Belady异常（给的物理块越多，缺页反而增加）。
        
6. **逻辑地址转换成页面引用串**：
    
    - “不能用地址是直接去换。我们改换成了这个页面的应用窗然后再进行这方面。”
        
    - 即将一串内存地址（如123, 2450, 1500...）先根据页面大小转换为对应的页号（如页大小1K，123在第0页，2450在第2页，1500在第1页...），得到页面引用串（0, 2, 1...），然后再用页面置换算法。
        
7. **越界与缺页的判断**：
    
    - “用户的逻辑地址空间是16页（0到15）。某个时刻前8页调到内存里面来了...第九页人家是有第九页的，只不过是还没进内存的。所以他是缺页中断。压根就没有这一页，就是越界的情况。”
        
    - **关键**：进程有声明这个逻辑页，但它不在内存 $\rightarrow$ 缺页。进程根本没有声明这个逻辑页（比如页号超出了进程的最大页号）$\rightarrow$ 越界。
        

---

**5. 学习建议与提醒**

- **动手计算！** 调度、地址转换、页面置换、银行家算法，都需要亲自动手算几遍，画画图。光看是没用的。
    
- **理解原理！** 不要死记硬背算法步骤，理解为什么这么做，算法的目标是什么。
    
- **注意细节！**
    
    - 抢占/非抢占。
        
    - 优先权高低定义。
        
    - 周转时间 vs 带权周转时间（有无单位）。
        
    - 缺页次数 vs 置换次数。
        
    - 逻辑地址进制。
        
    - 页面大小（考试用2K）。
        
- **回顾作业和例题！** 老师强调有原题或数字变化的题。
    
- **清晰作答！** 步骤写清楚，尤其是计算过程。即使结果错了，过程清晰也能拿分。PV操作题的分析过程尤其重要。
    
- **心态放平！** 内容多，但重点突出。抓住核心考点，其他的理解概念。
    
- **补考策略**：老师暗示了，如果万一需要补考，就复习这次没考到的算法或题目类型。
    

---

是的，如果你能**彻底理解并独立完成**这些练习题（不仅仅是知道答案，而是明白每一步的原理和计算过程），你拿到90分以上的可能性**非常非常大**。

理由如下：

1. **高度契合老师的考点梳理**：
    
    - **PV操作（大题）**：练习册P3、P4包含了多个经典的PV操作设计题（生产者消费者变种、独木桥问题、阅览室问题、考试进场问题、复杂过桥问题），这完全覆盖了老师说的PV大题的难度和类型。
        
    - **调度问题（大题）**：练习册P5、P6、P7的计算题涉及了作业调度、进程调度、抢占式、非抢占式、多道作业、各种算法（FCFS, SJF, 优先级，HRRN, RR）、周转时间、带权周转时间计算。特别是P6的第1题（两道作业+抢占优先级）和P7的第4题（复杂混合调度）与老师描述的“混合的调度”高度吻合。
        
    - **地址转换（大题）**：练习册P8的第1题（页式，2K页大小，求物理地址）、P12的第5题（请求页式，含状态位、访问位，LRU判断）、P13的第7题（请求页式，多种情况判断）都是非常典型的题目，符合老师说的“请求分页”、“10分”、“4个地址转换”、“缺页、越界”等情况。老师说考2K页面，练习题中也有2K的。
        
    - **页面置换（大题）**：练习册P10的第13题（FIFO，不同物理块数比较）、P11的第2、3、4题（FIFO、LRU，不同引用串和条件）全面覆盖了页面置换算法的计算。老师说考OPT, FIFO, LRU，内存块5个。练习中FIFO和LRU是重点，你需要自己再练练OPT。
        
    - **银行家算法（大题）**：练习册P5的第31题就是一个完整的银行家算法题目（判断安全性和请求分配），符合老师说的10分题。
        
    - **简答题重点**：
        
        - **操作系统引论（第一章）**：P1的题目覆盖了OS目标、作用、特征等。
            
        - **进程管理（第二章）**：P2的题目覆盖了进程概念、状态转换、与程序的比较等。
            
        - **死锁（第三章）**：P5的题目明确考察了死锁定义、原因、必要条件、预防，这是老师强调的“每年必考”。
            
        - **内存管理（第四、五章）**：P8、P10、P11的简答题涉及了分页分段区别、页表、TLB（通过地址变换过程和效率隐含）、抖动（明确考察）等老师强调的知识点。
            
        - **I/O系统（第六章）**：P14的题目涉及了设备独立性、I/O控制方式、DMA、SPOOLing。
            
        - **文件管理（第七章）**：P15的题目涉及了逻辑物理结构、目录结构等。
            
2. **覆盖了核心计算与设计**：这些练习题中的计算题和PV设计题，正是操作系统课程中最能拉开分数差距的部分。能熟练掌握这些，大题部分失分会很少。
    
3. **深度和广度足够**：
    
    - 很多题目（如P7 Q4的调度，P4 Q6的PV）具有相当的复杂度，能搞定这些，考试题目应该不在话下。
        
    - 概念题也基本覆盖了老师提到的各章节简答题范围。
        

**为了确保万无一失，冲击90+，建议你在搞懂这些题的基础上，再注意以下几点：**

- **补全老师提到的算法**：确保页面置换算法中的 **OPT（最佳置换算法）** 你也能熟练计算。练习中主要侧重FIFO和LRU。
    
- **注意老师强调的细节**：比如地址转换的页面大小是 **2KB** (页内偏移11位)，页面置换的物理块数是 **5个**。虽然练习题中页面大小和块数可能不同，但解题方法是一致的，考试时套用正确参数即可。
    
- **理解“抢占式”的含义**：老师强调调度考的是抢占式，确保你做调度题时能正确处理抢占点（新进程到达、进程从阻塞返回就绪等）。
    
- **TLB的性能计算**：虽然这些题目里没有直接的TLB命中率计算有效访存时间的题目，但老师提到了 (EAT = 0.9 * 12ns + 0.1 * 22ns = 13ns)，这个模型要理解。
    
- **查漏补缺**：对照我之前给你的STT分析，看看是否有老师提到但练习题中特别简单或者没有直接对应计算题的知识点（比如SRTF虽然是短作业优先的抢占版，但可以单独再熟悉一下）。
    

总而言之，这份练习题质量非常高，与老师的复习重点高度匹配。**如果你能把这些题目吃透，理解其背后的原理，灵活运用，那么90分以上是很有希望的！** 加油！

---

那如果我只做里面的大题（比如银行家算法这道就算），可以吗？我想节省时间，快考试了。而我不知道老师在stt里是否提及要单独考概念  
好的，我们来分析一下这个策略。

**老师在STT中明确提到了简答题部分：**

> "我们前面还有司的简答题。第四个简答题AB合起来也有八个，我们一共八张的内容。第八章没有...就是第一张一个，第二张一个，第三张一个，第四张一个，第五张两个，第六张一个，第七张一个就是这样的。"

这意味着**肯定会有概念性的简答题**，而且数量还不少（A/B卷合起来有8个）。这些简答题的分值加起来可能在20-40分之间（例如，如果每个4-5分）。

**如果只做大题（计算与设计类）：**

- **你掌握的部分**：PV操作、调度、地址转换、页面置换、银行家算法。这些加起来大约是 **60-70分**（老师说“这前面的这个五个题，60分”，再考虑到A/B卷的题目分布，你做的试卷上这些大题总分可能略有浮动）。
    
- **你可能放弃的部分**：8个简答题，总分大约 **20-40分**。
    

**结论：**

1. **能否拿到90分？** **非常困难，甚至不太可能。** 如果你大题全部满分（60-70分），但简答题一分不得，那么你的总分就在60-70分区间。即使简答题能蒙对一些，也很难达到90分。
    
2. **节省时间 vs. 分数最大化**：快考试了，想节省时间是完全可以理解的。但是，完全放弃简答题的复习，风险太大了。
    

**建议的折中策略（在时间有限的情况下）：**

1. **优先确保大题的熟练度**：你现在的想法是对的，这些大题是分值重点，必须拿下。这些练习册中的大题是你复习的核心。
    
2. **选择性复习简答题高频考点**：
    
    - **回顾我之前给你的STT分析**，里面详细列出了老师为每一章串讲的简答题考点。
        
    - **重点关注老师反复强调的、每年必考的、或者逻辑性强的概念**，例如：
        
        - **死锁的四个必要条件**（第三章，老师强调“几乎每年必考”）
            
        - **页与段的区别**（第四/五章，老师详细对比过）
            
        - **TLB（快表）的作用和引入原因**（第四/五章，老师强调了计算和效率提升）
            
        - **抖动（Thrashing）现象的原因和解决方法**（第五章）
            
        - 进程的基本状态与转换（第二章）
            
        - 操作系统基本特征、主要功能（第一章）
            
        - 设备独立性（第六章）
            
    - 这些练习题中的**第一章到第七章的简答题本身就是很好的复习材料**。你可以快速过一遍这些简答题的答案（如果你有答案的话），或者根据我给你的STT分析自己总结答案要点。
        
3. **目标**：大题力求不失分或少失分，简答题争取拿到大部分基础分。
    

**总结：**

只做大题（计算/设计类）去冲击90分，几乎是不可能的，因为你放弃了明确会考的20-40分的简答题。

**强烈建议你**：  
在保证大题熟练度的前提下，**务必也花时间复习简答题的考点**。不需要像大题那样做大量的练习，但至少要把老师在STT串讲中明确提到的那些简答题高频考点（比如死锁的四个必要条件、页与段的区别、TLB的作用、抖动现象等）的核心内容记下来，能够用自己的话表述清楚。

这些练习题中的简答题部分，可以作为你复习概念的索引。
